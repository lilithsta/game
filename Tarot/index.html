<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    background: radial-gradient(circle at center, #1a1b2f, #0d1321);
    color: #fff;
    font-family: "Noto Sans SC", "Noto Sans JP", sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
    transition: background 1s ease;
  }
  h1 {margin-top:40px;font-size:1.8em;text-shadow:0 0 10px #a29bfe;}
  #langSelect{margin:10px;background:#00cec9;border:none;color:#fff;padding:8px 12px;border-radius:6px;cursor:pointer;}
  #drawBtn{background:#6c5ce7;border:none;color:#fff;padding:12px 24px;border-radius:10px;cursor:pointer;font-size:16px;transition:all 0.3s;margin-top:20px;}
  #drawBtn:hover{background:#a29bfe;}
  .card{width:240px;height:420px;margin:40px auto;border-radius:10px;box-shadow:0 0 20px #6c5ce7;background-color:#2d3436;perspective:1000px;position:relative;}
  .inner{width:100%;height:100%;transition:transform 0.8s;transform-style:preserve-3d;position:relative;}
  .flip .inner{transform:rotateY(180deg);}
  .front,.back{position:absolute;width:100%;height:100%;backface-visibility:hidden;border-radius:10px;}
  .front{background-size:cover;background-position:center;}
  .back{transform:rotateY(180deg);background:rgba(30,30,60,0.9);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:15px;}
  #cardName{font-size:1.2em;margin-bottom:10px;color:#ffd86b;}
  #meaning{font-size:0.95em;line-height:1.4em;}
  #fortuneBox{margin:20px auto;width:85%;max-width:500px;background:rgba(255,255,255,0.08);border-radius:12px;padding:15px;text-align:left;box-shadow:0 0 10px rgba(0,0,0,0.3);}
  #fortuneBox h3{text-align:center;color:#ffd86b;}
  .fortune-item{margin:6px 0;}
  .stars{color:#ffd700;font-size:1.1em;}
  footer{color:#aaa;font-size:0.8em;margin-bottom:20px;}
</style>
</head>
<body>

<h1>ğŸ”® ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day / ä»Šæ—¥ã®ã‚¿ãƒ­ãƒƒãƒˆå ã„</h1>
<select id="langSelect">
  <option value="zh">ä¸­æ–‡</option>
  <option value="en">English</option>
  <option value="jp">æ—¥æœ¬èª</option>
</select><br>
<button id="drawBtn">å¼€å§‹æŠ½ç‰Œ / Draw / ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>

<div class="card" id="tarotCard">
  <div class="inner">
    <div class="front" id="front"></div>
    <div class="back">
      <h2 id="cardName"></h2>
      <p id="meaning"></p>
    </div>
  </div>
</div>

<div id="fortuneBox" style="display:none;">
  <h3>ğŸŒŸ ä»Šæ—¥è¿åŠ¿æŠ¥å‘Š / Daily Fortune</h3>
  <div id="fortuneText"></div>
</div>

<footer>Â© 2025 ä»Šæ—¥å¡”ç½— Â· Tarot of the Day</footer>

<script>
document.addEventListener("DOMContentLoaded",()=>{

const elementsColor={m:"#5e4fa2",c:"#2e86de",w:"#ff8c42",s:"#b2bec3",p:"#55efc4"};
const btn=document.getElementById("drawBtn");
const card=document.getElementById("tarotCard");
const inner=card.querySelector(".inner");
const front=document.getElementById("front");
const cardName=document.getElementById("cardName");
const meaning=document.getElementById("meaning");
const langSelect=document.getElementById("langSelect");
const fortuneBox=document.getElementById("fortuneBox");
const fortuneText=document.getElementById("fortuneText");

// å›¾ç‰‡è·¯å¾„æ„é€ ï¼ˆæœ¬åœ° /images/ï¼‰
function getImgUrl(id,suit){
  const safeSuit=(suit?suit.toLowerCase():"m");
  const num=String(id).padStart(2,"0");
  return `images/${safeSuit}${num}.jpg`;
}

// éšæœºæ˜Ÿçº§ 1~5
function randomStars(){return "â˜…".repeat(Math.floor(Math.random()*3+3));} // 3~5æ˜Ÿ

// ç”Ÿæˆä»Šæ—¥è¿åŠ¿æ–‡æœ¬
function genFortune(cardData,reversed,lang){
  const starLove=randomStars(),starCareer=randomStars(),starHealth=randomStars();
  let base = {
    zh: {
      love: ["æ„Ÿæƒ…ä¸Šéœ€çœŸè¯šæ²Ÿé€š","çˆ±æƒ…æœ‰æ–°æœºé‡","æ³¨æ„è¯¯ä¼šä¸å†·æ·¡","æµªæ¼«èƒ½é‡å¢å¼º"],
      career: ["å·¥ä½œè¿›å±•é¡ºåˆ©","é€‚åˆå›¢é˜Ÿåˆä½œ","æ³¨æ„è®¡åˆ’ä¸è€å¿ƒ","æœ‰æ™‹å‡æœºä¼š"],
      health: ["ä¿æŒè§„å¾‹ä½œæ¯","æ³¨æ„æƒ…ç»ªå‹åŠ›","ç²¾åŠ›å……æ²›","é¥®é£Ÿéœ€å‡è¡¡"],
      revHint: "é€†ä½ï¼šæš—ç¤ºå†…åœ¨çŸ›ç›¾æˆ–é˜»ç¢ï¼Œè¯·ä¿æŒå†·é™ã€‚",
      norHint: "æ­£ä½ï¼šèƒ½é‡æµåŠ¨é¡ºç•…ï¼Œä»£è¡¨ç§¯æå‰è¿›ã€‚"
    },
    en: {
      love: ["Be honest in love.","New romantic chance.","Avoid misunderstandings.","Emotional energy flows strongly."],
      career: ["Work goes well.","Good for teamwork.","Stay patient and plan.","Chance for promotion."],
      health: ["Keep a good routine.","Manage stress.","Energetic today.","Eat balanced meals."],
      revHint: "Reversed: Indicates blockage or confusionâ€”stay calm.",
      norHint: "Upright: Energy flows positively and progress is likely."
    },
    jp: {
      love: ["æ‹æ„›ã§ã¯èª å®Ÿãªä¼šè©±ã‚’ã€‚","æ–°ã—ã„å‡ºä¼šã„ã®å…†ã—ã€‚","èª¤è§£ã‚„å†·æ·¡ã«æ³¨æ„ã€‚","ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ãªæ°—é…ã€‚"],
      career: ["ä»•äº‹ã¯é †èª¿ã€‚","ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå‰ã€‚","è¨ˆç”»ã¨å¿è€ãŒå¤§åˆ‡ã€‚","æ˜‡é€²ã®ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Šã€‚"],
      health: ["ç”Ÿæ´»ãƒªã‚ºãƒ ã‚’æ•´ãˆã¦ã€‚","ã‚¹ãƒˆãƒ¬ã‚¹ã«æ³¨æ„ã€‚","æ´»åŠ›ã«ã‚ãµã‚Œã‚‹æ—¥ã€‚","é£Ÿäº‹ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚ã†ã€‚"],
      revHint: "é€†ä½ç½®ï¼šå†…é¢ã®æ··ä¹±ã‚„åœæ»ã‚’ç¤ºã—ã¾ã™ã€‚å†·é™ã•ã‚’ä¿ã£ã¦ã€‚",
      norHint: "æ­£ä½ç½®ï¼šå‰å‘ããªæµã‚Œã¨ç™ºå±•ã®å…†ã—ãŒã‚ã‚Šã¾ã™ã€‚"
    }
  }[lang];

  function pick(a){return a[Math.floor(Math.random()*a.length)];}
  const txt = `
  <div class='fortune-item'>ğŸ’˜ <b>çˆ±æƒ…ï¼š</b>${pick(base.love)} <span class='stars'>${starLove}</span></div>
  <div class='fortune-item'>ğŸ’¼ <b>äº‹ä¸šï¼š</b>${pick(base.career)} <span class='stars'>${starCareer}</span></div>
  <div class='fortune-item'>ğŸ’ª <b>å¥åº·ï¼š</b>${pick(base.health)} <span class='stars'>${starHealth}</span></div>
  <hr style='opacity:0.3'>
  <div style='font-size:0.9em;line-height:1.4em;'>
  ğŸ“– <b>${cardData.name[lang]}</b>ï¼š${cardData.meaning[lang]}<br>
  ğŸ”„ ${reversed?base.revHint:base.norHint}
  </div>`;
  fortuneText.innerHTML=txt;
  fortuneBox.style.display="block";
}

// ç”Ÿæˆå…¨å¡ç»„
const tarotDeck=[
  {id:0,suit:"m",name:{zh:"æ„šè€…",en:"The Fool",jp:"æ„šè€…"},meaning:{zh:"æ–°çš„å¼€å§‹ï¼Œè‡ªç”±ä¸å†’é™©ã€‚",en:"New beginnings, freedom, adventure.",jp:"æ–°ã—ã„æ—…ç«‹ã¡ã¨è‡ªç”±ã€‚"}},
  {id:1,suit:"m",name:{zh:"é­”æœ¯å¸ˆ",en:"The Magician",jp:"é­”è¡“å¸«"},meaning:{zh:"å±•ç°åˆ›é€ åŠ›ä¸è¡ŒåŠ¨åŠ›ã€‚",en:"Manifestation and creativity.",jp:"å‰µé€ ã¨æ„å¿—ã®åŠ›ã€‚"}},
  {id:2,suit:"m",name:{zh:"å¥³ç¥­å¸",en:"The High Priestess",jp:"å¥³æ•™çš‡"},meaning:{zh:"ç›´è§‰ä¸æ½œæ„è¯†çš„æ™ºæ…§ã€‚",en:"Intuition and hidden knowledge.",jp:"ç›´æ„Ÿã¨æ½œåœ¨æ„è­˜ã®çŸ¥æµã€‚"}},
  {id:3,suit:"m",name:{zh:"å¥³çš‡",en:"The Empress",jp:"å¥³å¸"},meaning:{zh:"ä¸°é¥¶ã€æ¯æ€§ã€åˆ›é€ ã€‚",en:"Abundance and creativity.",jp:"è±Šã‹ã•ã¨æ¯æ€§ã€‚"}},
  {id:4,suit:"m",name:{zh:"çš‡å¸",en:"The Emperor",jp:"çš‡å¸"},meaning:{zh:"æƒå¨ä¸ç§©åºã€‚",en:"Authority and structure.",jp:"æ¨©å¨ã¨ç§©åºã€‚"}},
  {id:5,suit:"m",name:{zh:"æ•™çš‡",en:"The Hierophant",jp:"æ³•ç‹"},meaning:{zh:"ä¼ ç»Ÿä¸ä¿¡ä»°ã€‚",en:"Tradition and faith.",jp:"ä¼çµ±ã¨ä¿¡ä»°ã€‚"}},
  {id:6,suit:"m",name:{zh:"æ‹äºº",en:"The Lovers",jp:"æ‹äººãŸã¡"},meaning:{zh:"çˆ±ä¸é€‰æ‹©ã€‚",en:"Love and choices.",jp:"æ„›ã¨é¸æŠã€‚"}},
  {id:7,suit:"m",name:{zh:"æˆ˜è½¦",en:"The Chariot",jp:"æˆ¦è»Š"},meaning:{zh:"å†³å¿ƒä¸èƒœåˆ©ã€‚",en:"Determination and triumph.",jp:"æ±ºæ„ã¨å‹åˆ©ã€‚"}},
  {id:8,suit:"m",name:{zh:"åŠ›é‡",en:"Strength",jp:"åŠ›"},meaning:{zh:"å‹‡æ°”ä¸æ¸©æŸ”ã€‚",en:"Courage and compassion.",jp:"å‹‡æ°—ã¨å„ªã—ã•ã€‚"}},
  {id:9,suit:"m",name:{zh:"éšå£«",en:"The Hermit",jp:"éš è€…"},meaning:{zh:"å†…çœä¸æ™ºæ…§ã€‚",en:"Introspection and guidance.",jp:"å†…çœã¨çŸ¥æµã€‚"}},
  {id:10,suit:"m",name:{zh:"å‘½è¿ä¹‹è½®",en:"Wheel of Fortune",jp:"é‹å‘½ã®è¼ª"},meaning:{zh:"å‘½è¿è½¬å˜ã€‚",en:"Change, destiny.",jp:"é‹å‘½ã®è»¢æ›ã€‚"}},
  {id:11,suit:"m",name:{zh:"æ­£ä¹‰",en:"Justice",jp:"æ­£ç¾©"},meaning:{zh:"å…¬å¹³ä¸å¹³è¡¡ã€‚",en:"Fairness and truth.",jp:"å…¬æ­£ã¨çœŸå®Ÿã€‚"}},
  {id:12,suit:"m",name:{zh:"å€’åŠäºº",en:"The Hanged Man",jp:"åŠã‚‰ã‚ŒãŸç”·"},meaning:{zh:"æ”¾ä¸‹ä¸æ–°è§†è§’ã€‚",en:"Surrender, new perspective.",jp:"çŠ ç‰²ã¨æ–°ã—ã„è¦–ç‚¹ã€‚"}},
  {id:13,suit:"m",name:{zh:"æ­»ç¥",en:"Death",jp:"æ­»ç¥"},meaning:{zh:"ç»“æŸä¸é‡ç”Ÿã€‚",en:"Transformation.",jp:"çµ‚ã‚ã‚Šã¨å†ç”Ÿã€‚"}},
  {id:14,suit:"m",name:{zh:"èŠ‚åˆ¶",en:"Temperance",jp:"ç¯€åˆ¶"},meaning:{zh:"å¹³è¡¡ä¸è°ƒå’Œã€‚",en:"Balance and moderation.",jp:"èª¿å’Œã¨ãƒãƒ©ãƒ³ã‚¹ã€‚"}},
  {id:15,suit:"m",name:{zh:"æ¶é­”",en:"The Devil",jp:"æ‚ªé­”"},meaning:{zh:"è¯±æƒ‘ä¸æŸç¼šã€‚",en:"Temptation and control.",jp:"èª˜æƒ‘ã¨æ”¯é…ã€‚"}},
  {id:16,suit:"m",name:{zh:"é«˜å¡”",en:"The Tower",jp:"å¡”"},meaning:{zh:"çªå˜ä¸è§‰é†’ã€‚",en:"Sudden change.",jp:"å´©å£Šã¨è¦šé†’ã€‚"}},
  {id:17,suit:"m",name:{zh:"æ˜Ÿæ˜Ÿ",en:"The Star",jp:"æ˜Ÿ"},meaning:{zh:"å¸Œæœ›ä¸çµæ„Ÿã€‚",en:"Hope and inspiration.",jp:"å¸Œæœ›ã¨ã²ã‚‰ã‚ãã€‚"}},
  {id:18,suit:"m",name:{zh:"æœˆäº®",en:"The Moon",jp:"æœˆ"},meaning:{zh:"å¹»è±¡ä¸ç›´è§‰ã€‚",en:"Illusion and intuition.",jp:"å¹»æƒ³ã¨ç›´æ„Ÿã€‚"}},
  {id:19,suit:"m",name:{zh:"å¤ªé˜³",en:"The Sun",jp:"å¤ªé™½"},meaning:{zh:"å–œæ‚¦ä¸æˆåŠŸã€‚",en:"Joy and success.",jp:"å–œã³ã¨æˆåŠŸã€‚"}},
  {id:20,suit:"m",name:{zh:"å®¡åˆ¤",en:"Judgement",jp:"å¯©åˆ¤"},meaning:{zh:"è§‰é†’ä¸æ•‘èµã€‚",en:"Awakening and redemption.",jp:"ç›®è¦šã‚ã¨æ•‘ã„ã€‚"}},
  {id:21,suit:"m",name:{zh:"ä¸–ç•Œ",en:"The World",jp:"ä¸–ç•Œ"},meaning:{zh:"å®Œæˆä¸åœ†æ»¡ã€‚",en:"Completion and harmony.",jp:"å®Œæˆã¨èª¿å’Œã€‚"}},

  ...["c","w","s","p"].flatMap(suit=>Array.from({length:14},(_,i)=>({
    id:i+1,suit,
    name:{zh:`${{"c":"åœ£æ¯","w":"æƒæ–","s":"å®å‰‘","p":"é’±å¸"}[suit]}${i+1}`,
          en:`${{"c":"Cups","w":"Wands","s":"Swords","p":"Pentacles"}[suit]} ${i+1}`,
          jp:`${{"c":"ã‚«ãƒƒãƒ—","w":"ãƒ¯ãƒ³ãƒ‰","s":"ã‚½ãƒ¼ãƒ‰","p":"ãƒšãƒ³ã‚¿ã‚¯ãƒ«"}[suit]}ã®${i+1}`},
    meaning:{zh:{"c":"æƒ…æ„Ÿä¸å…³ç³»","w":"è¡ŒåŠ¨ä¸åˆ›é€ ","s":"æ€æƒ³ä¸çœŸç†","p":"ç‰©è´¨ä¸äº‹ä¸š"}[suit],
             en:{"c":"Emotion & relationship","w":"Action & creativity","s":"Mind & truth","p":"Material & work"}[suit],
             jp:{"c":"æ„Ÿæƒ…ã¨é–¢ä¿‚","w":"è¡Œå‹•ã¨å‰µé€ ","s":"æ€è€ƒã¨çœŸå®Ÿ","p":"ç‰©è³ªã¨ä»•äº‹"}[suit]}
  })))
];

// ä»Šæ—¥ç¼“å­˜
const todayKey=new Date().toISOString().slice(0,10);
let saved=JSON.parse(localStorage.getItem("tarot_today")||"null");
if(saved&&saved.date===todayKey){
  showCard(saved.card,saved.reversed,saved.lang,true);
  btn.textContent="ä»Šæ—¥å·²æŠ½ç‰Œï¼ˆç‚¹å‡»é‡æ–°æŸ¥çœ‹ï¼‰";
}

// æŠ½ç‰Œ
btn.addEventListener("click",()=>{
  const lang=langSelect.value;
  const todayKey=new Date().toISOString().slice(0,10);
  const stored=JSON.parse(localStorage.getItem("tarot_today")||"null");
  if(stored&&stored.date===todayKey){
    showCard(stored.card,stored.reversed,stored.lang,true);
    return;
  }
  const cardData=tarotDeck[Math.floor(Math.random()*tarotDeck.length)];
  const reversed=Math.random()<0.5;
  localStorage.setItem("tarot_today",JSON.stringify({date:todayKey,card:cardData,reversed,lang}));
  showCard(cardData,reversed,lang,false);
});

// æ˜¾ç¤ºå¡ç‰‡ + è¿åŠ¿
function showCard(cardData,reversed,lang,instant){
  const imgUrl=getImgUrl(cardData.id,cardData.suit);
  front.style.backgroundImage=`url('${imgUrl}')`;
  front.style.transform=reversed?"rotate(180deg)":"rotate(0)";
  cardName.textContent=cardData.name[lang]+(reversed?"ï¼ˆé€†ä½ï¼‰":"ï¼ˆæ­£ä½ï¼‰");
  meaning.textContent=(reversed?"ã€é€†ä½å«ä¹‰ã€‘":"ã€æ­£ä½å«ä¹‰ã€‘")+" "+cardData.meaning[lang];
  const bgColor=elementsColor[cardData.suit]||"#6c5ce7";
  document.body.style.background=`radial-gradient(circle at center, ${bgColor}, #0d1321)`;
  inner.classList.add("flip");
  genFortune(cardData,reversed,lang);
}

});
</script>
</body>
</html>
