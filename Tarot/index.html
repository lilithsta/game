<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    background: radial-gradient(circle at center, #1a1b2f, #0d1321);
    color: #fff;
    font-family: "Noto Sans SC", "Noto Sans JP", sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  h1 {
    margin-top: 40px;
    font-size: 1.8em;
    text-shadow: 0 0 10px #a29bfe;
  }
  #langSelect {
    margin: 10px;
    background: #00cec9;
    border: none;
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
  }
  #drawBtn {
    background: #6c5ce7;
    border: none;
    color: #fff;
    padding: 12px 24px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s;
    margin-top: 20px;
  }
  #drawBtn:hover { background: #a29bfe; }

  .card {
    width: 240px;
    height: 420px;
    margin: 40px auto;
    border-radius: 10px;
    box-shadow: 0 0 20px #6c5ce7;
    background-color: #2d3436;
    perspective: 1000px;
    position: relative;
  }
  .inner {
    width: 100%;
    height: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
    position: relative;
  }
  .flip .inner { transform: rotateY(180deg); }
  .front, .back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 10px;
  }
  .front {
    background-size: cover;
    background-position: center;
  }
  .back {
    transform: rotateY(180deg);
    background: rgba(30,30,60,0.9);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 15px;
  }
  #cardName { font-size: 1.2em; margin-bottom: 10px; color: #ffd86b; }
  #meaning { font-size: 0.95em; line-height: 1.4em; }
  footer { color: #aaa; font-size: 0.8em; margin-bottom: 20px; }
</style>
</head>
<body>

<h1>ğŸ”® ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day / ä»Šæ—¥ã®ã‚¿ãƒ­ãƒƒãƒˆå ã„</h1>
<select id="langSelect">
  <option value="zh">ä¸­æ–‡</option>
  <option value="en">English</option>
  <option value="jp">æ—¥æœ¬èª</option>
</select>
<br>
<button id="drawBtn">å¼€å§‹æŠ½ç‰Œ / Draw / ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>

<div class="card" id="tarotCard">
  <div class="inner">
    <div class="front" id="front"></div>
    <div class="back">
      <h2 id="cardName"></h2>
      <p id="meaning"></p>
    </div>
  </div>
</div>

<footer>Â© 2025 ä»Šæ—¥å¡”ç½— Â· Tarot of the Day</footer>

<script>
/* --- å¡ç‰Œæ•°æ®ï¼ˆéƒ¨åˆ†ç¤ºä¾‹ï¼Œå¯æ‰©å±•ï¼‰ --- */
const tarotDeck = [
  // å¤§é˜¿å°”å¡é‚£
  { id: 0, suit: "m", name: { zh: "æ„šè€…", en: "The Fool", jp: "æ„šè€…" }, meaning: { zh: "æ–°çš„å¼€å§‹ï¼Œè‡ªç”±ä¸å†’é™©ã€‚", en: "New beginnings, freedom, adventure.", jp: "æ–°ã—ã„æ—…ç«‹ã¡ã¨è‡ªç”±ã€‚" } },
  { id: 1, suit: "m", name: { zh: "é­”æœ¯å¸ˆ", en: "The Magician", jp: "é­”è¡“å¸«" }, meaning: { zh: "å±•ç°ä½ çš„èƒ½åŠ›ï¼Œåˆ›é€ ä¸å®ç°ã€‚", en: "Manifestation, power, creativity.", jp: "å‰µé€ ã¨æ„å¿—ã®åŠ›ã€‚" } },
  { id: 19, suit: "m", name: { zh: "å¤ªé˜³", en: "The Sun", jp: "å¤ªé™½" }, meaning: { zh: "æˆåŠŸã€å–œæ‚¦ã€å¹¸ç¦ã€‚", en: "Success, joy, happiness.", jp: "æˆåŠŸã¨å¹¸ç¦ã€‚" } },
  { id: 21, suit: "m", name: { zh: "ä¸–ç•Œ", en: "The World", jp: "ä¸–ç•Œ" }, meaning: { zh: "åœ†æ»¡ã€å®Œæˆä¸æˆå°±ã€‚", en: "Fulfillment, completion, harmony.", jp: "å®Œæˆã¨èª¿å’Œã€‚" } },

  // åœ£æ¯ï¼ˆCï¼‰
  { id: 1, suit: "C", name: { zh: "åœ£æ¯ä¸€", en: "Ace of Cups", jp: "ã‚«ãƒƒãƒ—ã®ã‚¨ãƒ¼ã‚¹" }, meaning: { zh: "æƒ…æ„Ÿçš„æ–°å¼€å§‹ã€‚", en: "New emotional beginnings.", jp: "æ–°ã—ã„æ„Ÿæƒ…ã®å§‹ã¾ã‚Šã€‚" } },
  { id: 10, suit: "C", name: { zh: "åœ£æ¯å", en: "Ten of Cups", jp: "ã‚«ãƒƒãƒ—ã®10" }, meaning: { zh: "å®¶åº­å¹¸ç¦ä¸å’Œè°ã€‚", en: "Harmony and joy in relationships.", jp: "å®¶åº­ã®èª¿å’Œã¨å¹¸ç¦ã€‚" } },

  // æƒæ–ï¼ˆWï¼‰
  { id: 1, suit: "w", name: { zh: "æƒæ–ä¸€", en: "Ace of Wands", jp: "ãƒ¯ãƒ³ãƒ‰ã®ã‚¨ãƒ¼ã‚¹" }, meaning: { zh: "çµæ„Ÿçš„ç«èŠ±ã€‚", en: "The spark of inspiration.", jp: "ã²ã‚‰ã‚ãã®ç«èŠ±ã€‚" } },

  // å®å‰‘ï¼ˆSï¼‰
  { id: 1, suit: "s", name: { zh: "å®å‰‘ä¸€", en: "Ace of Swords", jp: "ã‚½ãƒ¼ãƒ‰ã®ã‚¨ãƒ¼ã‚¹" }, meaning: { zh: "æ–°çš„æƒ³æ³•ä¸çœŸç†ã€‚", en: "New ideas and clarity.", jp: "æ–°ã—ã„è€ƒãˆã¨çœŸå®Ÿã€‚" } },

  // é’±å¸ï¼ˆPï¼‰
  { id: 1, suit: "p", name: { zh: "é’±å¸ä¸€", en: "Ace of Pentacles", jp: "ãƒšãƒ³ã‚¿ã‚¯ãƒ«ã®ã‚¨ãƒ¼ã‚¹" }, meaning: { zh: "æ–°çš„ç‰©è´¨æœºé‡ã€‚", en: "New material opportunities.", jp: "æ–°ã—ã„ç‰©è³ªçš„ãƒãƒ£ãƒ³ã‚¹ã€‚" } }
];

/* --- å…ƒç´ å¼•ç”¨ --- */
const btn = document.getElementById("drawBtn");
const card = document.getElementById("tarotCard");
const inner = card.querySelector(".inner");
const front = document.getElementById("front");
const cardName = document.getElementById("cardName");
const meaning = document.getElementById("meaning");
const langSelect = document.getElementById("langSelect");

/* --- æ ¹æ®èŠ±è‰²å’Œç¼–å·æ„å»ºå›¾åƒè·¯å¾„ --- */
function getImgUrl(id, suit) {
  const prefix = suit.toUpperCase();
  const num = String(id).padStart(2, '0');
  return `https://raw.githubusercontent.com/lambiengcode/flutter-tarot-card/master/images/${prefix}${num}.png`;
}

/* --- åŠ è½½ä¿å­˜çš„ä»Šæ—¥æŠ½ç‰Œ --- */
const todayKey = new Date().toISOString().slice(0,10);
let saved = JSON.parse(localStorage.getItem("tarot_today"));
if (saved && saved.date === todayKey) {
  showCard(saved.card, saved.reversed, saved.lang, true);
  btn.textContent = "ä»Šæ—¥å·²æŠ½ç‰Œï¼ˆç‚¹å‡»é‡æ–°æŸ¥çœ‹ï¼‰";
}

/* --- æŠ½å¡é€»è¾‘ --- */
btn.addEventListener("click", () => {
  const lang = langSelect.value;
  const todayKey = new Date().toISOString().slice(0,10);
  let stored = JSON.parse(localStorage.getItem("tarot_today"));
  if (stored && stored.date === todayKey) {
    showCard(stored.card, stored.reversed, stored.lang, true);
    return;
  }
  const cardData = tarotDeck[Math.floor(Math.random() * tarotDeck.length)];
  const reversed = Math.random() < 0.5;
  localStorage.setItem("tarot_today", JSON.stringify({ date: todayKey, card: cardData, reversed, lang }));
  showCard(cardData, reversed, lang, false);
});

/* --- æ˜¾ç¤ºå¡ç‰Œ --- */
function showCard(cardData, reversed, lang, instant) {
  const imgUrl = getImgUrl(cardData.id, cardData.suit);
  front.style.backgroundImage = `url('${imgUrl}')`;
  front.style.transform = reversed ? "rotate(180deg)" : "rotate(0)";
  cardName.textContent = cardData.name[lang] + (reversed ? "ï¼ˆé€†ä½ï¼‰" : "ï¼ˆæ­£ä½ï¼‰");
  meaning.textContent = (reversed ? "ã€é€†ä½å«ä¹‰ã€‘" : "ã€æ­£ä½å«ä¹‰ã€‘") + " " + cardData.meaning[lang];
  inner.classList.add("flip");
}
</script>

</body>
</html>
