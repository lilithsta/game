<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body {
  background: radial-gradient(circle at center, #1a1b2f, #0d1321);
  color: #fff;
  font-family: "Noto Sans SC","Noto Sans JP",sans-serif;
  text-align: center;
  margin: 0; padding: 0;
  transition: background 1s ease;
}
h1 {
  margin-top: 30px;
  font-size: 1.8em;
  text-shadow: 0 0 10px #a29bfe;
}
#langSelect, #drawBtn {
  margin: 10px;
  background: #6c5ce7;
  border: none;
  color: #fff;
  padding: 10px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 15px;
}
#drawBtn:hover { background: #a29bfe; }

.container {
  display: flex;
  justify-content: center;
  align-items: flex-start;
  flex-wrap: wrap;
  margin-top: 20px;
  gap: 25px;
}

/* å¡ç‰‡åŒºåŸŸ */
.card-area {
  flex: 0 0 260px;
  display: flex;
  justify-content: center;
}
.card {
  width: 240px; height: 420px;
  border-radius: 10px;
  box-shadow: 0 0 20px #6c5ce7;
  background-color: #2d3436;
  perspective: 1000px;
  position: relative;
}
.inner {
  width: 100%; height: 100%;
  transition: transform 0.8s;
  transform-style: preserve-3d;
  position: relative;
}
.flip .inner { transform: rotateY(180deg); }
.front,.back {
  position: absolute;
  width: 100%; height: 100%;
  backface-visibility: hidden;
  border-radius: 10px;
}
.front {
  background-size: cover;
  background-position: center;
}
.back {
  transform: rotateY(180deg);
  background: rgba(30,30,60,0.9);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 15px;
}
#cardName { font-size: 1.2em; margin-bottom: 10px; color: #ffd86b; }
#meaning { font-size: 0.95em; line-height: 1.4em; }

/* è¿åŠ¿æŠ¥å‘ŠåŒºåŸŸ */
.fortune-area {
  flex: 0 0 340px;
  background: rgba(255,255,255,0.08);
  border-radius: 12px;
  padding: 15px;
  text-align: left;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  min-height: 420px;
}
.fortune-area h3 {
  text-align: center;
  color: #ffd86b;
  margin-top: 0;
}
.fortune-item { margin: 6px 0; }
.stars { color: #ffd700; font-size: 1.1em; }

/* å“åº”å¼å¸ƒå±€ */
@media (max-width: 768px) {
  .container { flex-direction: column; align-items: center; }
  .fortune-area { width: 90%; min-height: auto; }
}

footer { color:#aaa;font-size:0.8em;margin:30px 0; }
</style>
</head>
<body>

<h1>ğŸ”® ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day / ä»Šæ—¥ã®ã‚¿ãƒ­ãƒƒãƒˆå ã„</h1>
<select id="langSelect">
  <option value="zh">ä¸­æ–‡</option>
  <option value="en">English</option>
  <option value="jp">æ—¥æœ¬èª</option>
</select>
<button id="drawBtn">å¼€å§‹æŠ½ç‰Œ / Draw / ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>

<div class="container">
  <div class="card-area">
    <div class="card" id="tarotCard">
      <div class="inner">
        <div class="front" id="front"></div>
        <div class="back">
          <h2 id="cardName"></h2>
          <p id="meaning"></p>
        </div>
      </div>
    </div>
  </div>

  <div class="fortune-area" id="fortuneBox" style="display:none;">
    <h3 id="fortuneTitle">ğŸŒŸ ä»Šæ—¥è¿åŠ¿æŠ¥å‘Š</h3>
    <div id="fortuneText"></div>
  </div>
</div>

<footer>Â© 2025 ä»Šæ—¥å¡”ç½— Â· Tarot of the Day</footer>

<script>
document.addEventListener("DOMContentLoaded", async ()=>{
const elementsColor={m:"#5e4fa2",c:"#2e86de",w:"#ff8c42",s:"#b2bec3",p:"#55efc4"};
const btn=document.getElementById("drawBtn"),card=document.getElementById("tarotCard");
const inner=card.querySelector(".inner"),front=document.getElementById("front");
const cardName=document.getElementById("cardName"),meaning=document.getElementById("meaning");
const langSelect=document.getElementById("langSelect");
const fortuneBox=document.getElementById("fortuneBox"),fortuneTitle=document.getElementById("fortuneTitle"),fortuneText=document.getElementById("fortuneText");

let tarotDeck=[];
await fetch("tarotDeck.json").then(r=>r.json()).then(d=>tarotDeck=d)
.catch(()=>alert("âŒ æ— æ³•åŠ è½½ tarotDeck.json"));

// å›¾ç‰‡è·¯å¾„
function getImgUrl(id,suit){return `images/${suit.toLowerCase()}${String(id).padStart(2,"0")}.jpg`;}

// å¤šè¯­è¨€å­—å…¸
const i18n={
  zh:{title:"ğŸŒŸ ä»Šæ—¥è¿åŠ¿æŠ¥å‘Š",categories:["ğŸ’˜ çˆ±æƒ…","ğŸ’¼ äº‹ä¸š","ğŸ’ª å¥åº·"],
      reversed:"é€†ä½ï¼šæš—ç¤ºå†…åœ¨çŸ›ç›¾æˆ–é˜»ç¢ï¼Œè¯·ä¿æŒå†·é™ã€‚",
      upright:"æ­£ä½ï¼šèƒ½é‡æµåŠ¨é¡ºç•…ï¼Œä»£è¡¨ç§¯æå‰è¿›ã€‚",
      love:["æ„Ÿæƒ…ä¸Šéœ€çœŸè¯šæ²Ÿé€š","çˆ±æƒ…æœ‰æ–°æœºé‡","æ³¨æ„è¯¯ä¼šä¸å†·æ·¡","æµªæ¼«èƒ½é‡å¢å¼º"],
      career:["å·¥ä½œè¿›å±•é¡ºåˆ©","é€‚åˆå›¢é˜Ÿåˆä½œ","æ³¨æ„è®¡åˆ’ä¸è€å¿ƒ","æœ‰æ™‹å‡æœºä¼š"],
      health:["ä¿æŒè§„å¾‹ä½œæ¯","æ³¨æ„æƒ…ç»ªå‹åŠ›","ç²¾åŠ›å……æ²›","é¥®é£Ÿéœ€å‡è¡¡"]},
  en:{title:"ğŸŒŸ Daily Fortune Report",categories:["ğŸ’˜ Love","ğŸ’¼ Career","ğŸ’ª Health"],
      reversed:"Reversed: Indicates inner conflicts or obstacles â€” stay calm.",
      upright:"Upright: Energy flows positively â€” progress is likely.",
      love:["Be honest in love.","New romantic chance.","Avoid misunderstandings.","Emotional energy flows strongly."],
      career:["Work goes smoothly.","Good for teamwork.","Stay patient and plan.","Opportunity for promotion."],
      health:["Keep a regular routine.","Manage stress.","Energetic and active.","Eat balanced meals."]},
  jp:{title:"ğŸŒŸ ä»Šæ—¥ã®é‹å‹¢ãƒ¬ãƒãƒ¼ãƒˆ",categories:["ğŸ’˜ æ‹æ„›","ğŸ’¼ ä»•äº‹","ğŸ’ª å¥åº·"],
      reversed:"é€†ä½ç½®ï¼šå†…é¢ã®æ··ä¹±ã‚„åœæ»ã‚’ç¤ºã—ã¾ã™ã€‚å†·é™ã•ã‚’ä¿ã£ã¦ã€‚",
      upright:"æ­£ä½ç½®ï¼šå‰å‘ããªæµã‚Œã¨ç™ºå±•ã®å…†ã—ãŒã‚ã‚Šã¾ã™ã€‚",
      love:["æ‹æ„›ã§ã¯èª å®Ÿãªä¼šè©±ã‚’ã€‚","æ–°ã—ã„å‡ºä¼šã„ã®å…†ã—ã€‚","èª¤è§£ã‚„å†·æ·¡ã«æ³¨æ„ã€‚","ãƒ­ãƒãƒ³ãƒãƒƒã‚¯ãªæ°—é…ã€‚"],
      career:["ä»•äº‹ã¯é †èª¿ã€‚","ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒå‰ã€‚","è¨ˆç”»ã¨å¿è€ãŒå¤§åˆ‡ã€‚","æ˜‡é€²ã®ãƒãƒ£ãƒ³ã‚¹ã‚ã‚Šã€‚"],
      health:["ç”Ÿæ´»ãƒªã‚ºãƒ ã‚’æ•´ãˆã¦ã€‚","ã‚¹ãƒˆãƒ¬ã‚¹ã«æ³¨æ„ã€‚","æ´»åŠ›ã«ã‚ãµã‚Œã‚‹æ—¥ã€‚","é£Ÿäº‹ã®ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚ã†ã€‚"]}
};

// æ˜Ÿçº§éšæœº
function randomStars(){return "â˜…".repeat(Math.floor(Math.random()*3+3));}

// ç”Ÿæˆè¿åŠ¿
function genFortune(card,reversed,lang){
  const t=i18n[lang]||i18n.zh;
  fortuneTitle.textContent=t.title;
  const pick=a=>a[Math.floor(Math.random()*a.length)];
  const sections=[
    `${t.categories[0]}ï¼š${pick(t.love)} <span class='stars'>${randomStars()}</span>`,
    `${t.categories[1]}ï¼š${pick(t.career)} <span class='stars'>${randomStars()}</span>`,
    `${t.categories[2]}ï¼š${pick(t.health)} <span class='stars'>${randomStars()}</span>`
  ].map(s=>`<div class='fortune-item'>${s}</div>`).join("");
  fortuneText.innerHTML=sections+
  `<hr style='opacity:0.3'>
  ğŸ“– <b>${card.name[lang]}</b>ï¼š${card.meaning[lang]}<br>
  ğŸ”„ ${reversed?t.reversed:t.upright}`;
  fortuneBox.style.display="block";
}

// ç¼“å­˜
const todayKey=new Date().toISOString().slice(0,10);
let saved=JSON.parse(localStorage.getItem("tarot_today")||"null");
if(saved&&saved.date===todayKey){
  showCard(saved.card,saved.reversed,saved.lang,true);
  btn.textContent="ä»Šæ—¥å·²æŠ½ç‰Œï¼ˆç‚¹å‡»é‡æ–°æŸ¥çœ‹ï¼‰";
}

// æŠ½ç‰Œ
btn.addEventListener("click",()=>{
  const lang=langSelect.value;
  const stored=JSON.parse(localStorage.getItem("tarot_today")||"null");
  if(stored&&stored.date===todayKey){showCard(stored.card,stored.reversed,stored.lang,true);return;}
  const card=tarotDeck[Math.floor(Math.random()*tarotDeck.length)];
  const reversed=Math.random()<0.5;
  localStorage.setItem("tarot_today",JSON.stringify({date:todayKey,card,reversed,lang}));
  showCard(card,reversed,lang,false);
});

// æ˜¾ç¤ºå¡ç‰‡
function showCard(card,reversed,lang){
  const img=getImgUrl(card.id,card.suit);
  front.style.backgroundImage=`url('${img}')`;
  front.style.transform=reversed?"rotate(180deg)":"rotate(0)";
  cardName.textContent=card.name[lang]+(reversed?"ï¼ˆé€†ä½ï¼‰":"ï¼ˆæ­£ä½ï¼‰");
  meaning.textContent=(reversed?"ã€é€†ä½å«ä¹‰ã€‘":"ã€æ­£ä½å«ä¹‰ã€‘")+" "+card.meaning[lang];
  document.body.style.background=`radial-gradient(circle at center, ${elementsColor[card.suit]||"#6c5ce7"}, #0d1321)`;
  inner.classList.add("flip");
  genFortune(card,reversed,lang);
}
});
</script>
</body>
</html>
