<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    background: radial-gradient(circle at center, #1a1b2f, #0d1321);
    color: #fff;
    font-family: "Noto Sans SC", "Noto Sans JP", sans-serif;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  h1 {
    margin-top: 40px;
    font-size: 1.8em;
    text-shadow: 0 0 10px #a29bfe;
  }
  #langSelect {
    margin: 10px;
    background: #00cec9;
    border: none;
    color: #fff;
    padding: 8px 12px;
    border-radius: 6px;
    cursor: pointer;
  }
  #drawBtn {
    background: #6c5ce7;
    border: none;
    color: #fff;
    padding: 12px 24px;
    border-radius: 10px;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s;
    margin-top: 20px;
  }
  #drawBtn:hover {
    background: #a29bfe;
  }
  .card {
    width: 240px;
    height: 420px;
    margin: 40px auto;
    border-radius: 10px;
    box-shadow: 0 0 20px #6c5ce7;
    background-color: #2d3436;
    perspective: 1000px;
    position: relative;
  }
  .inner {
    width: 100%;
    height: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
    position: relative;
  }
  .flip .inner {
    transform: rotateY(180deg);
  }
  .front, .back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 10px;
  }
  .front {
    background: url('https://upload.wikimedia.org/wikipedia/commons/d/de/RWS_Tarot_00_Fool.jpg') center/cover no-repeat;
  }
  .back {
    transform: rotateY(180deg);
    background: rgba(30,30,60,0.9);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 15px;
  }
  #cardName { font-size: 1.2em; margin-bottom: 10px; color: #ffd86b; }
  #meaning { font-size: 0.95em; line-height: 1.4em; }
  footer {
    color: #aaa;
    font-size: 0.8em;
    margin-bottom: 20px;
  }
</style>
</head>
<body>

<h1 id="title">ğŸ”® ä»Šæ—¥å¡”ç½—å åœ Tarot of the Day / ä»Šæ—¥ã®ã‚¿ãƒ­ãƒƒãƒˆå ã„</h1>
<select id="langSelect">
  <option value="zh">ä¸­æ–‡</option>
  <option value="en">English</option>
  <option value="jp">æ—¥æœ¬èª</option>
</select>
<br>
<button id="drawBtn">å¼€å§‹æŠ½ç‰Œ / Draw / ã‚«ãƒ¼ãƒ‰ã‚’å¼•ã</button>

<div class="card" id="tarotCard">
  <div class="inner">
    <div class="front" id="front"></div>
    <div class="back">
      <h2 id="cardName"></h2>
      <p id="meaning"></p>
    </div>
  </div>
</div>

<footer>Â© 2025 ä»Šæ—¥å¡”ç½— Â· Tarot of the Day</footer>

<script>
const tarotDeck = [
  { id: 0, name: { zh: "æ„šè€…", en: "The Fool", jp: "æ„šè€…" },
    meaning: { zh: "æ–°çš„å¼€å§‹ï¼Œè‡ªç”±ä¸å†’é™©ã€‚", en: "New beginnings, freedom, adventure.", jp: "æ–°ã—ã„æ—…ç«‹ã¡ã¨è‡ªç”±ã€‚" } },
  { id: 1, name: { zh: "é­”æœ¯å¸ˆ", en: "The Magician", jp: "é­”è¡“å¸«" },
    meaning: { zh: "å±•ç°ä½ çš„èƒ½åŠ›ï¼Œåˆ›é€ ä¸å®ç°ã€‚", en: "Manifestation, power, creativity.", jp: "å‰µé€ ã¨æ„å¿—ã®åŠ›ã€‚" } },
  { id: 2, name: { zh: "å¥³ç¥­å¸", en: "The High Priestess", jp: "å¥³æ•™çš‡" },
    meaning: { zh: "ç›´è§‰ä¸ç§˜å¯†çš„æ™ºæ…§ã€‚", en: "Intuition and hidden knowledge.", jp: "ç›´æ„Ÿã¨ç§˜ã‚ã‚‰ã‚ŒãŸçŸ¥æµã€‚" } },
  { id: 3, name: { zh: "å¥³çš‡", en: "The Empress", jp: "å¥³å¸" },
    meaning: { zh: "çˆ±ä¸ä¸°ç››ï¼Œå…³æ€€ä¸åˆ›é€ ã€‚", en: "Abundance, care, creativity.", jp: "è±Šã‹ã•ã¨æ¯æ€§ã€‚" } },
  { id: 4, name: { zh: "çš‡å¸", en: "The Emperor", jp: "çš‡å¸" },
    meaning: { zh: "æƒå¨ä¸ç§©åºï¼ŒæŒæ§å±€åŠ¿ã€‚", en: "Authority, control, stability.", jp: "æ”¯é…ã¨ç§©åºã€‚" } },
  { id: 5, name: { zh: "æ•™çš‡", en: "The Hierophant", jp: "æ³•ç‹" },
    meaning: { zh: "ä¼ ç»Ÿã€ä¿¡ä»°ä¸ç²¾ç¥å¼•å¯¼ã€‚", en: "Tradition, belief, guidance.", jp: "ä¼çµ±ã¨ä¿¡ä»°ã€‚" } },
  { id: 6, name: { zh: "æ‹äºº", en: "The Lovers", jp: "æ‹äººãŸã¡" },
    meaning: { zh: "çˆ±æƒ…ä¸é€‰æ‹©ã€‚", en: "Love and choices.", jp: "æ„›ã¨é¸æŠã€‚" } },
  { id: 7, name: { zh: "æˆ˜è½¦", en: "The Chariot", jp: "æˆ¦è»Š" },
    meaning: { zh: "å†³å¿ƒä¸èƒœåˆ©ã€‚", en: "Determination and victory.", jp: "æ±ºæ„ã¨å‹åˆ©ã€‚" } },
  { id: 8, name: { zh: "åŠ›é‡", en: "Strength", jp: "åŠ›" },
    meaning: { zh: "å†…åœ¨çš„å‹‡æ°”ä¸æ¸©æŸ”ã€‚", en: "Inner strength and compassion.", jp: "å†…ãªã‚‹å¼·ã•ã¨å„ªã—ã•ã€‚" } },
  { id: 13, name: { zh: "æ­»ç¥", en: "Death", jp: "æ­»ç¥" },
    meaning: { zh: "ç»“æŸä¸é‡ç”Ÿã€‚", en: "Endings and transformation.", jp: "çµ‚ã‚ã‚Šã¨å†ç”Ÿã€‚" } },
  { id: 19, name: { zh: "å¤ªé˜³", en: "The Sun", jp: "å¤ªé™½" },
    meaning: { zh: "æˆåŠŸã€å–œæ‚¦ã€å¹¸ç¦ã€‚", en: "Success, joy, happiness.", jp: "æˆåŠŸã¨å¹¸ç¦ã€‚" } },
  { id: 20, name: { zh: "å®¡åˆ¤", en: "Judgement", jp: "å¯©åˆ¤" },
    meaning: { zh: "è§‰é†’ä¸æ•‘èµã€‚", en: "Awakening, redemption.", jp: "ç›®è¦šã‚ã¨æ•‘ã„ã€‚" } },
  { id: 21, name: { zh: "ä¸–ç•Œ", en: "The World", jp: "ä¸–ç•Œ" },
    meaning: { zh: "åœ†æ»¡ã€å®Œæˆä¸æˆå°±ã€‚", en: "Fulfillment, completion, harmony.", jp: "å®Œæˆã¨èª¿å’Œã€‚" } }
];

const btn = document.getElementById("drawBtn");
const card = document.getElementById("tarotCard");
const inner = card.querySelector(".inner");
const front = document.getElementById("front");
const cardName = document.getElementById("cardName");
const meaning = document.getElementById("meaning");
const langSelect = document.getElementById("langSelect");

// æ£€æŸ¥ä»Šæ—¥æ˜¯å¦å·²æŠ½ç‰Œ
const todayKey = new Date().toISOString().slice(0,10);
let saved = JSON.parse(localStorage.getItem("tarot_today"));
if (saved && saved.date === todayKey) {
  showCard(saved.card, saved.reversed, saved.lang, true);
}

btn.addEventListener("click", () => {
  if (saved && saved.date === todayKey) {
    alert("ä½ ä»Šå¤©å·²ç»æŠ½è¿‡å•¦ï¼(You already drew today!)");
    return;
  }
  const cardData = tarotDeck[Math.floor(Math.random()*tarotDeck.length)];
  const reversed = Math.random() < 0.5; // æ­£é€†ä½
  const lang = langSelect.value;
  localStorage.setItem("tarot_today", JSON.stringify({date: todayKey, card: cardData, reversed, lang}));
  showCard(cardData, reversed, lang, false);
});

function showCard(cardData, reversed, lang, instant) {
  const imgUrl = `https://raw.githubusercontent.com/andymeneely/tarot-images/main/${String(cardData.id).padStart(2,'0')}_${cardData.name.en.replace(" ", "_")}.jpg`;

  front.style.backgroundImage = `url('${imgUrl}')`;
  front.style.transform = reversed ? "rotate(180deg)" : "rotate(0)";
  cardName.textContent = cardData.name[lang] + (reversed ? "ï¼ˆé€†ä½ï¼‰" : "ï¼ˆæ­£ä½ï¼‰");
  meaning.textContent = (reversed ? "ã€é€†ä½å«ä¹‰ã€‘" : "ã€æ­£ä½å«ä¹‰ã€‘") + " " + cardData.meaning[lang];
  if (!instant) {
    inner.classList.add("flip");
  } else {
    inner.classList.add("flip");
  }
}
</script>
</body>
</html>
