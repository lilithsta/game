<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ‹çˆ±ç‰ˆ MBTI æµ‹è¯• | Love MBTI Test | æ‹æ„›ç‰ˆMBTI</title>
  <style>
    :root{
      --bg:#0f172a;--panel:#1e293b;--text:#e5e7eb;--muted:#94a3b8;--accent:#22d3ee;--accent2:#a78bfa
    }
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(900px 600px at 70% -10%,#1e293b 0%,#0f172a 60%),linear-gradient(180deg,#0b1020,#0f172a);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Noto Sans,Helvetica,Arial}
    .container{max-width:980px;margin:24px auto;padding:16px}
    .card{background:var(--panel);border:1px solid rgba(255,255,255,.08);border-radius:18px;box-shadow:0 10px 30px rgba(0,0,0,.35);overflow:hidden}
    header,footer{padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.08)}
    footer{border-top:1px solid rgba(255,255,255,.08);border-bottom:none;color:var(--muted)}
    h1{margin:0;font-size:clamp(20px,3vw,28px)}
    .content{padding:16px}
    .row{display:grid;grid-template-columns:1.1fr .9fr;gap:14px}
    @media (max-width:900px){.row{grid-template-columns:1fr}}
    .panel{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:14px}
    .lang{display:flex;gap:8px;flex-wrap:wrap}
    button{border-radius:12px;border:1px solid rgba(255,255,255,.14);background:linear-gradient(120deg,rgba(34,211,238,.15),rgba(167,139,250,.15));color:var(--text);padding:8px 12px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent}
    .progress{height:8px;background:#0b1220;border:1px solid rgba(255,255,255,.1);border-radius:999px;overflow:hidden}
    .progress>div{height:100%;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0%}
    .q{padding:10px;border:1px solid rgba(255,255,255,.08);border-radius:12px;margin:10px 0;background:rgba(0,0,0,.12)}
    .q h3{margin:0 0 8px;font-size:16px}
    .opts{display:flex;gap:10px;flex-wrap:wrap}
    .opts label{display:flex;align-items:center;gap:8px;padding:8px 10px;border:1px solid rgba(255,255,255,.08);border-radius:10px;background:rgba(255,255,255,.04);cursor:pointer}
    .muted{color:var(--muted);font-size:13px}
    .result{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:720px){.result{grid-template-columns:1fr}}
    .animal{font-size:64px;line-height:1}
    .pill{border:1px dashed rgba(255,255,255,.18);border-radius:999px;padding:6px 10px;display:inline-block;margin:4px;font-size:13px}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" id="app">
      <header>
        <div style="display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap;align-items:center">
          <h1 id="title">æ‹çˆ±ç‰ˆ MBTI æµ‹è¯•</h1>
          <div class="lang">
            <button id="btnZH">ä¸­æ–‡</button>
            <button id="btnJA">æ—¥æœ¬èª</button>
            <button id="btnEN">English</button>
          </div>
        </div>
      </header>
      <div class="content">
        <div class="row">
          <section class="panel">
            <div class="muted" id="intro">åŸºäºå››ç»´åº¦ï¼ˆå¤–å‘/å†…å‘ã€æ„Ÿè§‰/ç›´è§‰ã€æ€è€ƒ/æƒ…æ„Ÿã€åˆ¤æ–­/çŸ¥è§‰ï¼‰æ¨æµ‹ä½ çš„æ‹çˆ±å€¾å‘ï¼Œä»…ä¾›å¨±ä¹ã€‚</div>
            <div class="progress" style="margin:10px 0"><div id="bar"></div></div>
            <div id="quiz"></div>
            <div style="display:flex;justify-content:space-between;gap:8px;flex-wrap:wrap;margin-top:6px">
              <div>
                <button id="prev" disabled>ä¸Šä¸€æ­¥</button>
                <button id="next" disabled>ä¸‹ä¸€æ­¥</button>
              </div>
              <div>
                <button id="submit" disabled>æŸ¥çœ‹ç»“æœ</button>
              </div>
            </div>
          </section>
          <section class="panel">
            <div id="resultBox" hidden>
              <div class="muted" id="yourTypeLabel">ä½ çš„ç±»å‹</div>
              <div style="display:flex;align-items:center;gap:12px;margin:6px 0">
                <div class="animal" id="animal">ğŸ¦Š</div>
                <div>
                  <div style="font-weight:800;font-size:24px" id="typeName">ENFP Â· çƒ­æƒ…æµªæ¼«ç‹ç‹¸</div>
                  <div class="muted" id="typeTags"></div>
                </div>
              </div>
              <div id="typeDesc" style="margin:8px 0"></div>
              <div id="matchBox" class="panel" style="margin-top:10px">
                <div class="muted" id="compatLabel">é€‚é… & äº’è¡¥ï¼ˆå‚è€ƒï¼‰</div>
                <div id="matches" style="margin-top:6px"></div>
              </div>
              <div class="panel" style="margin-top:10px">
                <div class="muted" id="scoreLabel">ç»´åº¦å¾—åˆ†</div>
                <div id="bars"></div>
              </div>
            </div>
            <div id="placeholder" class="muted">å®Œæˆç­”é¢˜åï¼Œè¿™é‡Œä¼šæ˜¾ç¤ºä½ çš„æ‹ŸäººåŒ–åŠ¨ç‰©ç”»åƒä¸é…å¯¹å»ºè®®ã€‚</div>
          </section>
        </div>
      </div>
      <footer>
        <div id="foot">Â© 2025 â€¢ çº¯å‰ç«¯å®ç°ï¼Œå¯ç¦»çº¿ä½¿ç”¨ã€‚ä½ å¯åœ¨ä»£ç ä¸­è‡ªå®šä¹‰é¢˜åº“ä¸æ–‡æ¡ˆã€‚</div>
      </footer>
    </div>
  </div>

<script>
// ===== é…ç½®ï¼šé—®é¢˜ï¼ˆé¡ºåºä¸€è‡´ï¼‰ï¼Œæ¯é¢˜æŒ‡å‘ä¸€ä¸ªç»´åº¦ =====
const QUESTIONS_META = [
  {dim:'EI'},{dim:'SN'},{dim:'TF'},{dim:'JP'},
  {dim:'EI'},{dim:'SN'},{dim:'TF'},{dim:'JP'},
  {dim:'EI'},{dim:'SN'},{dim:'TF'},{dim:'JP'},
  {dim:'EI'},{dim:'SN'},{dim:'TF'},{dim:'JP'},
];

// ===== å¤šè¯­è¨€æ–‡æœ¬ =====
const TEXTS = {
  zh:{
    title:'æ‹çˆ±ç‰ˆ MBTI æµ‹è¯•',
    intro:'åŸºäºå››ç»´åº¦ï¼ˆå¤–å‘/å†…å‘ã€æ„Ÿè§‰/ç›´è§‰ã€æ€è€ƒ/æƒ…æ„Ÿã€åˆ¤æ–­/çŸ¥è§‰ï¼‰æ¨æµ‹ä½ çš„æ‹çˆ±å€¾å‘ï¼Œä»…ä¾›å¨±ä¹ã€‚',
    btnPrev:'ä¸Šä¸€æ­¥',btnNext:'ä¸‹ä¸€æ­¥',btnSubmit:'æŸ¥çœ‹ç»“æœ',
    yourType:'ä½ çš„ç±»å‹',compat:'é€‚é… & äº’è¡¥ï¼ˆå‚è€ƒï¼‰',score:'ç»´åº¦å¾—åˆ†',
    questions:[
      {q:'åˆæ¬¡çº¦ä¼šï¼Œä½ ä¼šï¼š',a:['ä¸»å¯¼æ°”æ°›','æ…¢çƒ­è§‚å¯Ÿ']},
      {q:'èŠå¤©æ›´å–œæ¬¢ï¼š',a:['å…·ä½“è¯é¢˜','æŠ½è±¡æƒ³æ³•']},
      {q:'é‡åˆ°çŸ›ç›¾æ›´çœ‹é‡ï¼š',a:['åŸåˆ™ä¸é€»è¾‘','æ„Ÿå—ä¸å…³ç³»']},
      {q:'å®‰æ’çº¦ä¼šæ›´å€¾å‘ï¼š',a:['æå‰è®¡åˆ’','éšå¿ƒéšæ€§']},
      {q:'å‘¨æœ«ç›¸å¤„æ›´æƒ³ï¼š',a:['ä¸€èµ·ç¤¾äº¤æˆ–å‡ºæ¸¸','äºŒäººä¸–ç•Œå®…å®¶']},
      {q:'çºªå¿µæ—¥ç¤¼ç‰©åå¥½ï¼š',a:['å®ç”¨è€çœ‹','å¯Œæœ‰è±¡å¾']},
      {q:'å¯¹æ–¹ä½è½æ—¶ä½ ï¼š',a:['å¸®åˆ†æç»™æ–¹æ¡ˆ','å…ˆé™ªä¼´ä¸å®‰æ…°']},
      {q:'æ—…è¡Œé£æ ¼ï¼š',a:['è¡Œç¨‹è¡¨å®Œå–„','è¯´èµ°å°±èµ°']},
      {q:'è®¤è¯†æ–°æœ‹å‹ï¼š',a:['å¾ˆå¿«æ‰“æˆä¸€ç‰‡','æ…¢æ…¢ç†Ÿæ‚‰']},
      {q:'å®‰å…¨æ„Ÿæ¥æºï¼š',a:['æ˜ç¡®æ‰¿è¯º','é»˜å¥‘é¢‘ç‡']},
      {q:'é€ç¤¼æ–¹å¼ï¼š',a:['ç ”ç©¶éœ€æ±‚æ€§ä»·æ¯”','æ‰“é€ ä¸“å±ä»ªå¼æ„Ÿ']},
      {q:'å®¶åŠ¡åˆ†å·¥ï¼š',a:['æ˜ç¡®è§„åˆ™','éšæœºè½®æ¢']},
      {q:'æ„Ÿæƒ…å‡ºé—®é¢˜æ—¶ï¼š',a:['ç›´æ¥è®¨è®ºåè°ƒ','å…ˆè‡ªæˆ‘æ¶ˆåŒ–']},
      {q:'ç¬¬ä¸€æ¬¡è§å®¶é•¿ï¼š',a:['æŒ‰éƒ¨å°±ç­çœ‹ç»†èŠ‚','é‡è§†æ°›å›´è‡ªç„¶èŠ']},
      {q:'å¯¹å¦ä¸€åŠæœŸå¾…ï¼š',a:['èƒ½åŠ›å¯é ','ä½“è´´æ¸©æš–']},
      {q:'å©šç¤¼è®¡åˆ’ï¼š',a:['æ—¶é—´çº¿/é¢„ç®—å…ˆè¡Œ','è¾¹èµ°è¾¹å®šçœ‹ç¼˜åˆ†']},
    ],
    animals: getAnimalsZH(),
  },
  ja:{
    title:'æ‹æ„›ç‰ˆMBTIãƒ†ã‚¹ãƒˆ',
    intro:'4ã¤ã®è»¸ï¼ˆå¤–å‘/å†…å‘ãƒ»æ„Ÿè¦š/ç›´è¦³ãƒ»æ€è€ƒ/æ„Ÿæƒ…ãƒ»åˆ¤æ–­/çŸ¥è¦šï¼‰ã‹ã‚‰æ‹æ„›å‚¾å‘ã‚’æ¨æ¸¬ã—ã¾ã™ã€‚',
    btnPrev:'å‰ã¸',btnNext:'æ¬¡ã¸',btnSubmit:'çµæœã‚’è¦‹ã‚‹',
    yourType:'ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—',compat:'ç›¸æ€§ & è£œå®Œï¼ˆå‚è€ƒï¼‰',score:'æŒ‡æ¨™ã‚¹ã‚³ã‚¢',
    questions:[
      {q:'åˆãƒ‡ãƒ¼ãƒˆã§ã¯ï¼Ÿ',a:['ãƒªãƒ¼ãƒ‰ã—ã¦ç››ã‚Šä¸Šã’ã‚‹','æ§˜å­ã‚’è¦‹ã¦ä¸å¯§ã«é€²ã‚€']},
      {q:'ä¼šè©±ã®å¥½ã¿ï¼š',a:['å…·ä½“ãƒ»å®Ÿç”¨','ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ»æœªæ¥']},
      {q:'è¡çªæ™‚ã«é‡è¦–ï¼š',a:['è«–ç†ã¨åŸå‰‡','æ°—æŒã¡ã¨é–¢ä¿‚']},
      {q:'ãƒ‡ãƒ¼ãƒˆã®çµ„ã¿ç«‹ã¦ï¼š',a:['äº‹å‰ã«è¨ˆç”»','æµã‚Œã«ä»»ã›ã‚‹']},
      {q:'é€±æœ«ã®éã”ã—æ–¹ï¼š',a:['å‹äººã¨æ´»å‹•','2äººã§ã¾ã£ãŸã‚Š']},
      {q:'è¨˜å¿µæ—¥ã®è´ˆã‚Šç‰©ï¼š',a:['å®Ÿç”¨çš„','è±¡å¾´çš„ãƒ»ã‚µãƒ—ãƒ©ã‚¤ã‚º']},
      {q:'ç›¸æ‰‹ãŒè½ã¡è¾¼ã‚€æ™‚ï¼š',a:['åˆ†æã¨ææ¡ˆ','å¯„ã‚Šæ·»ã„å…±æ„Ÿ']},
      {q:'æ—…è¡Œã‚¹ã‚¿ã‚¤ãƒ«ï¼š',a:['ç¶¿å¯†ãªè¡Œç¨‹è¡¨','è¡Œãå½“ãŸã‚Šã°ã£ãŸã‚Š']},
      {q:'æ–°ã—ã„å‡ºä¼šã„ï¼š',a:['ã™ãã«æ‰“ã¡è§£ã‘ã‚‹','ã‚†ã£ãã‚Šè·é›¢ã‚’ç¸®ã‚ã‚‹']},
      {q:'å®‰å¿ƒæ„Ÿã®æºï¼š',a:['æ˜ç¢ºãªç´„æŸ','æ³¢é•·ã¨ç©ºæ°—æ„Ÿ']},
      {q:'ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆé¸ã³ï¼š',a:['ãƒ‹ãƒ¼ã‚ºã¨ã‚³ã‚¹ãƒ‘','ç›¸æ‰‹å°‚ç”¨ã®ç‰¹åˆ¥æ„Ÿ']},
      {q:'å®¶äº‹åˆ†æ‹…ï¼š',a:['ãƒ«ãƒ¼ãƒ«ã‚’æ˜ç¢ºã«','çŠ¶æ³ã§è‡¨æ©Ÿå¿œå¤‰']},
      {q:'é–¢ä¿‚ãŒä¸èª¿ã®æ™‚ï¼š',a:['ç‡ç›´ã«è©±ã—åˆã†','è‡ªåˆ†ã®ä¸­ã§æ•´ç†ã™ã‚‹']},
      {q:'åˆã‚ã¦ã®æŒ¨æ‹¶ï¼š',a:['æ®µå–ã‚Šã¨ãƒãƒŠãƒ¼é‡è¦–','è‡ªç„¶ä½“ã§é›°å›²æ°—é‡è¦–']},
      {q:'ç›¸æ‰‹ã¸ã®æœŸå¾…ï¼š',a:['æœ‰èƒ½ã§ä¿¡é ¼ã§ãã‚‹','æ€ã„ã‚„ã‚ŠãŒã‚ã‚‹']},
      {q:'çµå©šè¨ˆç”»ï¼š',a:['ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«/äºˆç®—å…ˆè¡Œ','æµã‚Œã§æ±ºã‚ã‚‹']},
    ],
    animals: getAnimalsJA(),
  },
  en:{
    title:'Love MBTI Test',
    intro:'A playful take on MBTI in love across four axes (E/I, S/N, T/F, J/P). For entertainment only.',
    btnPrev:'Back',btnNext:'Next',btnSubmit:'See Result',
    yourType:'Your Type',compat:'Matches & Complements (for fun)',score:'Dimension Scores',
    questions:[
      {q:'On a first date you would:',a:['Lead and set the vibe','Observe and warm up slowly']},
      {q:'Your chat preference:',a:['Concrete, practical','Ideas and future talk']},
      {q:'In conflict you value:',a:['Logic & principles','Feelings & relationship']},
      {q:'Planning a date:',a:['Plan ahead','Go with the flow']},
      {q:'Weekend together:',a:['Social/outdoor','Cozy time for two']},
      {q:'Anniversary gifts:',a:['Useful & lasting','Symbolic & surprising']},
      {q:'When theyâ€™re stressed:',a:['Analyze and propose','Listen and comfort']},
      {q:'Travel style:',a:['Detailed itinerary','Spontaneous trip']},
      {q:'Meeting new people:',a:['Quickly connect','Slowly open up']},
      {q:'Sense of security:',a:['Clear commitment','Shared wavelength']},
      {q:'Gift approach:',a:['Needs & value','Personal touch'],},
      {q:'Housework split:',a:['Clear rules','Flexible rotation']},
      {q:'When issues arise:',a:['Talk it out directly','Process then discuss']},
      {q:'Meet the parents:',a:['Plan & etiquette','Natural atmosphere']},
      {q:'Expectations for partner:',a:['Competent & reliable','Caring & warm']},
      {q:'Wedding plan:',a:['Timeline/budget first','Decide along the way']},
    ],
    animals: getAnimalsEN(),
  }
};

function getAnimalsZH(){
  return {
    ENFJ:{emo:'ğŸ•Šï¸',name:'æ¸©æš–é¢†é˜ŸÂ·é¸½',desc:'å–„äºç…§é¡¾ä»–äººæ„Ÿå—ä¸èŠ‚å¥ï¼Œç»™è¶³å®‰å…¨æ„Ÿï¼Œä¹Ÿç›¼å½¼æ­¤æˆå°±ã€‚',tags:['å…±æƒ…','æ‰¿è¯º','é•¿æœŸ'],match:['INFP','ISFP','INTP']},
    ENFP:{emo:'ğŸ¦Š',name:'çµæ„Ÿå†’é™©å®¶Â·ç‹',desc:'çƒ­æƒ…å¤–å‘ã€ç‚¹å­ä¸æ–­ï¼Œæ‹çˆ±é‡Œè¿½æ±‚å¿ƒåŠ¨ä¸å…±åŒæˆé•¿ã€‚',tags:['æµªæ¼«','æ–°é²œ','çœŸè¯š'],match:['INFJ','INTJ','ISFJ']},
    ENTJ:{emo:'ğŸ¦…',name:'è¡ŒåŠ¨æŒ‡æŒ¥å®˜Â·é¹°',desc:'ç›®æ ‡æ¸…æ™°ã€æ‰§è¡Œæœæ–­ï¼ŒæœŸå¾…å½¼æ­¤ç‹¬ç«‹åˆå¹¶è‚©å‰è¡Œã€‚',tags:['æ•ˆç‡','å¯é ','è¾¹ç•Œ'],match:['INFP','ISFP','ENFP']},
    ENTP:{emo:'ğŸ¬',name:'è„‘æ´ç©å®¶Â·æµ·è±š',desc:'æœºæ™ºå¥½è¾©çˆ±æ–°çŸ¥ï¼Œéœ€è¦æ€æƒ³ç«èŠ±ä¸è‡ªç”±ç©ºé—´ã€‚',tags:['åˆ›æ„','å¯¹è¯','è‡ªç”±'],match:['INFJ','ISFJ','INTJ']},
    ESFJ:{emo:'ğŸ¼',name:'è´´å¿ƒç®¡å®¶Â·ç†ŠçŒ«',desc:'ä½“è´´å‘¨åˆ°ã€æ“…ç»è¥å…³ç³»ï¼Œæ³¨é‡ä»ªå¼æ„Ÿä¸ç¨³å®šã€‚',tags:['ä½“è´´','ç¨³å®š','åŠ¡å®'],match:['ISFP','INFP','ESFP']},
    ESFP:{emo:'ğŸ¦',name:'ç°åœºæ´¾å¿«ä¹Â·ç‹®',desc:'æ°›å›´é«˜æ‰‹ï¼Œé‡è§†å½“ä¸‹é™ªä¼´ä¸å¿«ä¹ä½“éªŒã€‚',tags:['çƒ­æƒ…','é™ªä¼´','ä½“éªŒ'],match:['ISFJ','ISTJ','ENFJ']},
    ESTJ:{emo:'ğŸ¦¬',name:'åŠ¡å®é¢†ç­Â·é‡ç‰›',desc:'å®ˆåŸåˆ™ã€é‡æ‰¿è¯ºï¼Œç»™è¶³å®‰å…¨æ„Ÿä½†ä¹Ÿæ³¨é‡è§„åˆ™ã€‚',tags:['åŸåˆ™','è´£ä»»','ç¨³å®š'],match:['ISFP','INFP','ESFP']},
    ESTP:{emo:'ğŸ¯',name:'è¡ŒåŠ¨ç°å®å®¶Â·è™',desc:'ç›´æ¥æœæ–­ï¼Œåå¥½ä¸€èµ·æŒ‘æˆ˜ä¸é«˜æ•ˆæ²Ÿé€šã€‚',tags:['æœæ–­','æŒ‘æˆ˜','ç›´æ¥'],match:['ISFJ','INFJ','ESFJ']},
    INFJ:{emo:'ğŸ¦‰',name:'æ´å¯Ÿå¼•å¯¼å¸ˆÂ·é¸®',desc:'æ¸´æœ›æ·±åº¦è¿ç»“ä¸å…±åŒæ„¿æ™¯ï¼Œæ¸©æŸ”è€Œåšå®šã€‚',tags:['æ´å¯Ÿ','ç†æƒ³','æ¸©æŸ”'],match:['ENFP','ENTP','ISFP']},
    INFP:{emo:'ğŸ¦¥',name:'ç†æƒ³æ‹äººÂ·æ ‘æ‡’',desc:'é‡ä»·å€¼ä¸è¢«ç†è§£ï¼Œæ„¿å› çˆ±è€Œæˆé•¿ã€‚',tags:['æµªæ¼«','çº¯ç²¹','å…±æƒ…'],match:['ENFJ','ENTJ','ESFJ']},
    INTJ:{emo:'ğŸº',name:'æˆ˜ç•¥ä¼´ä¾£Â·ç‹¼',desc:'ç†æ€§å…‹åˆ¶ã€é•¿çº¿è§„åˆ’ï¼Œéœ€è¦è¢«å°Šé‡è¾¹ç•Œä¸æ•ˆç‡ã€‚',tags:['ç­–ç•¥','ç‹¬ç«‹','æ•ˆç‡'],match:['ENFP','ENFJ','ESFP']},
    INTP:{emo:'ğŸ¦',name:'æ€è¾¨åˆä¼™äººÂ·æµ£ç†Š',desc:'çˆ±ç ”ç©¶ä¸çœŸè¯šå¯¹è¯ï¼Œä¸çˆ±è¡¨é¢ç¤¾äº¤ã€‚',tags:['ç†æ€§','å¥½å¥‡','çœŸå®'],match:['ENFJ','ESFJ','ISFJ']},
    ISFJ:{emo:'ğŸ¦Œ',name:'æ¸©æŸ”å®ˆæŠ¤Â·é¹¿',desc:'ç»†è…»åŠ¡å®ï¼Œåœ¨æ—¥å¸¸é‡Œé»˜é»˜ç”¨å¿ƒã€‚',tags:['ä½“è´´','åŠ¡å®','å®ˆæŠ¤'],match:['ENFP','ESFP','ENTP']},
    ISFP:{emo:'ğŸ•Šï¸',name:'æ„Ÿæ€§è‰ºæœ¯å®¶Â·é¸½',desc:'è¿½æ±‚è‡ªç”±ä¸çœŸè¯šï¼Œåæ„Ÿè¿‡åº¦æ§åˆ¶ã€‚',tags:['è‡ªç”±','ä½“éªŒ','çœŸè¯š'],match:['ENFJ','ESTJ','ESFJ']},
    ISTJ:{emo:'ğŸ»',name:'å¯é å®å¹²å®¶Â·ç†Š',desc:'æœ‰ç§©åºã€å®ˆæ‰¿è¯ºï¼Œç”¨è¡ŒåŠ¨è¡¨è¾¾çˆ±ã€‚',tags:['ç§©åº','è´£ä»»','ç»†èŠ‚'],match:['ENFP','ESFP','INFP']},
    ISTP:{emo:'ğŸ¦«',name:'å†·é™å®ä½œæ´¾Â·æµ·ç‹¸',desc:'ç‹¬ç«‹ä¸“æ³¨ï¼Œå°‘è¯´å¤šåšï¼Œå°Šé‡å½¼æ­¤ç©ºé—´ã€‚',tags:['ç‹¬ç«‹','è¡ŒåŠ¨','ç©ºé—´'],match:['ENFJ','ESFJ','INFJ']},
  };
}
function getAnimalsJA(){
  return {
    ENFJ:{emo:'ğŸ•Šï¸',name:'æ¸©ã‹ãªãƒªãƒ¼ãƒ€ãƒ¼ãƒ»ãƒãƒˆ',desc:'ç›¸æ‰‹ã®æ°—æŒã¡ã¨ãƒšãƒ¼ã‚¹ã‚’å¤§åˆ‡ã«ã—ã€å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹ã‚¿ã‚¤ãƒ—ã€‚',tags:['å…±æ„Ÿ','ç´„æŸ','é•·æœŸ'],match:['INFP','ISFP','INTP']},
    ENFP:{emo:'ğŸ¦Š',name:'ã‚¤ãƒ³ã‚¹ãƒ”ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å†’é™ºå®¶ãƒ»ã‚­ãƒ„ãƒ',desc:'æƒ…ç†±çš„ã§å¥½å¥‡å¿ƒæ—ºç››ã€‚æ‹ã§å¿ƒã®ã¨ãã‚ãã¨æˆé•·ã‚’æ±‚ã‚ã‚‹ã€‚',tags:['ãƒ­ãƒãƒ³','æ–°é®®','èª å®Ÿ'],match:['INFJ','INTJ','ISFJ']},
    ENTJ:{emo:'ğŸ¦…',name:'è¡Œå‹•å¸ä»¤å®˜ãƒ»ãƒ¯ã‚·',desc:'ç›®æ¨™æ˜ç¢ºãƒ»å®Ÿè¡ŒåŠ›æŠœç¾¤ã€‚è‡ªç«‹ã¨å”åƒã®ãƒãƒ©ãƒ³ã‚¹ã‚’é‡è¦–ã€‚',tags:['åŠ¹ç‡','ä¿¡é ¼','å¢ƒç•Œ'],match:['INFP','ISFP','ENFP']},
    ENTP:{emo:'ğŸ¬',name:'ãƒ–ãƒ¬ã‚¹ãƒˆä½¿ã„ãƒ»ã‚¤ãƒ«ã‚«',desc:'æ©ŸçŸ¥ã«å¯Œã¿è­°è«–å¥½ãã€‚è‡ªç”±ã•ã¨çŸ¥çš„ãªç«èŠ±ãŒå¿…è¦ã€‚',tags:['å‰µé€ ','å¯¾è©±','è‡ªç”±'],match:['INFJ','ISFJ','INTJ']},
    ESFJ:{emo:'ğŸ¼',name:'æ°—é…ã‚Šãƒã‚¹ã‚¿ãƒ¼ãƒ»ãƒ‘ãƒ³ãƒ€',desc:'é¢å€’è¦‹ãŒã‚ˆãé–¢ä¿‚ã‚’å¤§åˆ‡ã«ã™ã‚‹ã€‚å„€å¼æ„Ÿã¨å®‰å®šã‚’é‡è¦–ã€‚',tags:['æ€ã„ã‚„ã‚Š','å®‰å®š','å®Ÿç”¨'],match:['ISFP','INFP','ESFP']},
    ESFP:{emo:'ğŸ¦',name:'ãƒãƒƒãƒ”ãƒ¼ã‚¨ãƒ³ã‚¿ãƒ¡ãƒ»ãƒ©ã‚¤ã‚ªãƒ³',desc:'å ´ã®ç©ºæ°—ã‚’æ˜ã‚‹ãã™ã‚‹ã€‚ä»Šã“ã“ã®æ¥½ã—ã•ã¨å¯„ã‚Šæ·»ã„ã‚’é‡è¦–ã€‚',tags:['æƒ…ç†±','åŒä¼´','ä½“é¨“'],match:['ISFJ','ISTJ','ENFJ']},
    ESTJ:{emo:'ğŸ¦¬',name:'ç¾å®Ÿæ´¾ãƒªãƒ¼ãƒ€ãƒ¼ãƒ»ãƒã‚¤ã‚½ãƒ³',desc:'åŸå‰‡ãƒ»è²¬ä»»æ„ŸãŒå¼·ãã€å®‰å¿ƒæ„Ÿã‚’ä¸ãˆã‚‹ã€‚',tags:['åŸå‰‡','è²¬ä»»','å®‰å®š'],match:['ISFP','INFP','ESFP']},
    ESTP:{emo:'ğŸ¯',name:'å³æ–­å®Ÿè¡Œãƒ»ãƒˆãƒ©',desc:'ã‚¹ãƒ”ãƒ¼ãƒ‰æ„Ÿã‚ã‚‹æŒ‘æˆ¦ã¨ç‡ç›´ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å¥½ã‚€ã€‚',tags:['æ±ºæ–­','æŒ‘æˆ¦','ç‡ç›´'],match:['ISFJ','INFJ','ESFJ']},
    INFJ:{emo:'ğŸ¦‰',name:'æ´å¯Ÿã‚¬ã‚¤ãƒ‰ãƒ»ãƒ•ã‚¯ãƒ­ã‚¦',desc:'æ·±ã„çµ†ã¨å…±é€šãƒ“ã‚¸ãƒ§ãƒ³ã‚’æ±‚ã‚ã‚‹ã€ã‚„ã•ã—ãèŠ¯ã®ã‚ã‚‹ã‚¿ã‚¤ãƒ—ã€‚',tags:['æ´å¯Ÿ','ç†æƒ³','ã‚„ã•ã—ã•'],match:['ENFP','ENTP','ISFP']},
    INFP:{emo:'ğŸ¦¥',name:'ç†æƒ³ã®æ‹äººãƒ»ãƒŠãƒã‚±ãƒ¢ãƒ',desc:'ä¾¡å€¤è¦³ã¨ç†è§£ã‚’é‡ã‚“ã˜ã€æ„›ã§æˆé•·ã—ã¦ã„ãã€‚',tags:['ãƒ­ãƒãƒ³','ç´”ç²‹','å…±æ„Ÿ'],match:['ENFJ','ENTJ','ESFJ']},
    INTJ:{emo:'ğŸº',name:'ã‚¹ãƒˆãƒ©ãƒ†ã‚¸ã‚¹ãƒˆãƒ»ã‚ªã‚ªã‚«ãƒŸ',desc:'åˆç†çš„ã§é•·æœŸè¨ˆç”»å‹ã€‚å¢ƒç•Œã¨åŠ¹ç‡ã®å°Šé‡ãŒå¿…è¦ã€‚',tags:['æˆ¦ç•¥','è‡ªç«‹','åŠ¹ç‡'],match:['ENFP','ENFJ','ESFP']},
    INTP:{emo:'ğŸ¦',name:'æ€ç´¢ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ãƒ»ã‚¢ãƒ©ã‚¤ã‚°ãƒ',desc:'æ¢ç©¶å¿ƒãŒå¼·ãã€ç‡ç›´ãªå¯¾è©±ã‚’å¥½ã‚€ã€‚',tags:['ç†æ€§','å¥½å¥‡å¿ƒ','èª å®Ÿ'],match:['ENFJ','ESFJ','ISFJ']},
    ISFJ:{emo:'ğŸ¦Œ',name:'ã‚„ã•ã—ã„å®ˆè­·è€…ãƒ»ã‚·ã‚«',desc:'ç´°ã‚„ã‹ã§å®Ÿç›´ã€‚æ—¥ã€…ã®æ°—é£ã„ã§æ„›ã‚’ç¤ºã™ã€‚',tags:['é…æ…®','å®Ÿç›´','å®ˆè­·'],match:['ENFP','ESFP','ENTP']},
    ISFP:{emo:'ğŸ•Šï¸',name:'æ„Ÿæ€§ã‚¢ãƒ¼ãƒ†ã‚£ã‚¹ãƒˆãƒ»ãƒãƒˆ',desc:'è‡ªç”±ã¨èª å®Ÿãªé–¢ä¿‚ã‚’æ±‚ã‚ã€éåº¦ãªã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã¯è‹¦æ‰‹ã€‚',tags:['è‡ªç”±','ä½“é¨“','èª å®Ÿ'],match:['ENFJ','ESTJ','ESFJ']},
    ISTJ:{emo:'ğŸ»',name:'å …å®Ÿãªå®Ÿå‹™å®¶ãƒ»ã‚¯ãƒ',desc:'ç§©åºã¨ç´„æŸã‚’é‡è¦–ã€‚è¡Œå‹•ã§æ„›ã‚’è¦‹ã›ã‚‹ã€‚',tags:['ç§©åº','è²¬ä»»','ç´°éƒ¨'],match:['ENFP','ESFP','INFP']},
    ISTP:{emo:'ğŸ¦«',name:'ã‚¯ãƒ¼ãƒ«ãƒ¡ãƒ¼ã‚«ãƒ¼ãƒ»ãƒ“ãƒ¼ãƒãƒ¼',desc:'ç‹¬ç«‹å¿ƒãŒå¼·ãå®Ÿè¡Œæ´¾ã€‚é©åˆ‡ãªè·é›¢æ„Ÿã‚’å¤§åˆ‡ã«ã™ã‚‹ã€‚',tags:['è‡ªç«‹','è¡Œå‹•','è·é›¢æ„Ÿ'],match:['ENFJ','ESFJ','INFJ']},
  };
}
function getAnimalsEN(){
  return {
    ENFJ:{emo:'ğŸ•Šï¸',name:'Warm Leader Â· Dove',desc:'Tends to guide the pace with care, offering security and shared growth.',tags:['Empathy','Commitment','Long-term'],match:['INFP','ISFP','INTP']},
    ENFP:{emo:'ğŸ¦Š',name:'Inspired Adventurer Â· Fox',desc:'High-energy and curious; seeks spark and growth in love.',tags:['Romance','Novelty','Sincerity'],match:['INFJ','INTJ','ISFJ']},
    ENTJ:{emo:'ğŸ¦…',name:'Action Commander Â· Eagle',desc:'Goal-driven and decisive; values independence and partnership.',tags:['Efficiency','Reliable','Boundaries'],match:['INFP','ISFP','ENFP']},
    ENTP:{emo:'ğŸ¬',name:'Idea Player Â· Dolphin',desc:'Witty, debate-loving; needs intellectual sparks and freedom.',tags:['Creative','Dialogue','Freedom'],match:['INFJ','ISFJ','INTJ']},
    ESFJ:{emo:'ğŸ¼',name:'Caring Steward Â· Panda',desc:'Attentive and relationship-focused; loves rituals and stability.',tags:['Caring','Stable','Practical'],match:['ISFP','INFP','ESFP']},
    ESFP:{emo:'ğŸ¦',name:'Live-in-the-moment Â· Lion',desc:'Vibe master who values fun, warmth, and shared experiences.',tags:['Passion','Presence','Experience'],match:['ISFJ','ISTJ','ENFJ']},
    ESTJ:{emo:'ğŸ¦¬',name:'Pragmatic Foreman Â· Bison',desc:'Principled and dependable; offers security and order.',tags:['Principle','Duty','Stability'],match:['ISFP','INFP','ESFP']},
    ESTP:{emo:'ğŸ¯',name:'Decisive Doer Â· Tiger',desc:'Direct, thrill-seeking; prefers challenges and straight talk.',tags:['Decisive','Challenge','Direct'],match:['ISFJ','INFJ','ESFJ']},
    INFJ:{emo:'ğŸ¦‰',name:'Insight Guide Â· Owl',desc:'Seeks deep bonds and shared vision; gentle yet firm.',tags:['Insight','Ideal','Gentle'],match:['ENFP','ENTP','ISFP']},
    INFP:{emo:'ğŸ¦¥',name:'Ideal Romantic Â· Sloth',desc:'Values meaning and being understood; grows through love.',tags:['Romance','Purity','Empathy'],match:['ENFJ','ENTJ','ESFJ']},
    INTJ:{emo:'ğŸº',name:'Strategic Partner Â· Wolf',desc:'Rational, long-range planner; needs respect for boundaries.',tags:['Strategy','Independent','Efficient'],match:['ENFP','ENFJ','ESFP']},
    INTP:{emo:'ğŸ¦',name:'Analytic Partner Â· Raccoon',desc:'Curious and candid; prefers sincere, thoughtful exchange.',tags:['Rational','Curious','Honest'],match:['ENFJ','ESFJ','ISFJ']},
    ISFJ:{emo:'ğŸ¦Œ',name:'Gentle Guardian Â· Deer',desc:'Diligent and caring; shows love through daily acts.',tags:['Considerate','Practical','Protective'],match:['ENFP','ESFP','ENTP']},
    ISFP:{emo:'ğŸ•Šï¸',name:'Sensitive Artist Â· Dove',desc:'Seeks freedom and genuineness; dislikes over-control.',tags:['Freedom','Experience','Sincere'],match:['ENFJ','ESTJ','ESFJ']},
    ISTJ:{emo:'ğŸ»',name:'Dependable Doer Â· Bear',desc:'Orderly and responsible; love is in the details and deeds.',tags:['Order','Duty','Detail'],match:['ENFP','ESFP','INFP']},
    ISTP:{emo:'ğŸ¦«',name:'Cool Builder Â· Beaver',desc:'Independent and hands-on; values space and action over words.',tags:['Independent','Action','Space'],match:['ENFJ','ESFJ','INFJ']},
  };
}

// ===== çŠ¶æ€ =====
const state = {page:0, perPage:2, answers:{}, score:{EI:0,SN:0,TF:0,JP:0}, lang:'zh'};

// ===== å…ƒç´  =====
const bar = document.getElementById('bar');
const quiz = document.getElementById('quiz');
const prevBtn = document.getElementById('prev');
const nextBtn = document.getElementById('next');
const submitBtn = document.getElementById('submit');
const titleEl = document.getElementById('title');
const introEl = document.getElementById('intro');
const resultBox = document.getElementById('resultBox');
const placeholder = document.getElementById('placeholder');
const animalEl = document.getElementById('animal');
const typeNameEl = document.getElementById('typeName');
const typeDescEl = document.getElementById('typeDesc');
const typeTagsEl = document.getElementById('typeTags');
const matchesEl = document.getElementById('matches');
const barsEl = document.getElementById('bars');
const yourTypeLabel = document.getElementById('yourTypeLabel');
const compatLabel = document.getElementById('compatLabel');
const scoreLabel = document.getElementById('scoreLabel');

// è¯­è¨€åˆ‡æ¢
document.getElementById('btnZH').onclick=()=>setLang('zh');
document.getElementById('btnJA').onclick=()=>setLang('ja');
document.getElementById('btnEN').onclick=()=>setLang('en');

function setLang(l){ state.lang = l; renderAll(); }

function renderAll(){
  const T = TEXTS[state.lang];
  titleEl.textContent = T.title;
  introEl.textContent = T.intro;
  prevBtn.textContent = T.btnPrev; nextBtn.textContent = T.btnNext; submitBtn.textContent = T.btnSubmit;
  yourTypeLabel.textContent = T.yourType; compatLabel.textContent=T.compat; scoreLabel.textContent=T.score;
  renderQuiz();
}

function renderQuiz(){
  const T = TEXTS[state.lang];
  const total = QUESTIONS_META.length;
  const answered = Object.keys(state.answers).length;
  bar.style.width = Math.round(answered/total*100) + '%';
  const start = state.page * state.perPage;
  const items = T.questions.slice(start, start + state.perPage);
  quiz.innerHTML = items.map((item, idx)=>{
    const qIndex = start + idx; const id = qIndex+1;
    const name = 'q_'+id; const val = state.answers[id];
    return `<div class="q">
      <h3>${id}. ${item.q}</h3>
      <div class="opts">
        ${item.a.map((opt, j)=>`<label><input type="radio" name="${name}" value="${j===0?+1:-1}" ${(val===(j===0?+1:-1))?'checked':''}>${opt}</label>`).join('')}
      </div>
      <div class="muted">${dimLabel(QUESTIONS_META[qIndex].dim)}ï¼ˆå·¦é€‰é¡¹=æ­£å‘ï¼Œå³é€‰é¡¹=è´Ÿå‘ï¼‰</div>
    </div>`;
  }).join('');
  prevBtn.disabled = state.page===0;
  nextBtn.disabled = answered < Math.min(total,(state.page+1)*state.perPage);
  submitBtn.disabled = answered < total;
}

function dimLabel(k){
  const map = {zh:{EI:'å¤–å‘ E / å†…å‘ I',SN:'æ„Ÿè§‰ S / ç›´è§‰ N',TF:'æ€è€ƒ T / æƒ…æ„Ÿ F',JP:'åˆ¤æ–­ J / çŸ¥è§‰ P'},
               ja:{EI:'å¤–å‘ E / å†…å‘ I',SN:'æ„Ÿè¦š S / ç›´è¦³ N',TF:'æ€è€ƒ T / æ„Ÿæƒ… F',JP:'åˆ¤æ–­ J / çŸ¥è¦š P'},
               en:{EI:'Extraversion E / Introversion I',SN:'Sensing S / iNtuition N',TF:'Thinking T / Feeling F',JP:'Judging J / Perceiving P'}};
  return map[state.lang][k];
}

quiz.addEventListener('change', (e)=>{
  const t = e.target; if(!t || t.type!=='radio') return;
  const id = Number(t.name.split('_')[1]);
  state.answers[id] = Number(t.value);
  recompute(); renderQuiz();
});

prevBtn.onclick=()=>{ state.page = Math.max(0, state.page-1); renderQuiz(); };
nextBtn.onclick=()=>{ state.page = Math.min(Math.ceil(QUESTIONS_META.length/state.perPage)-1, state.page+1); renderQuiz(); };
submitBtn.onclick=()=>{ const type = toType(state.score); showResult(type); };

function recompute(){
  state.score = {EI:0,SN:0,TF:0,JP:0};
  for(let i=0;i<QUESTIONS_META.length;i++){
    const id = i+1; const v = state.answers[id]; if(typeof v==='number') state.score[QUESTIONS_META[i].dim]+= v;
  }
}

function toType(score){
  const EI = score.EI>=0?'E':'I';
  const SN = score.SN>=0?'S':'N';
  const TF = score.TF>=0?'T':'F';
  const JP = score.JP>=0?'J':'P';
  return EI+SN+TF+JP;
}

function showResult(type){
  const T = TEXTS[state.lang];
  const info = T.animals[type];
  if(!info){ alert('No mapping for '+type); return; }
  placeholder.hidden = true; resultBox.hidden = false;
  animalEl.textContent = info.emo;
  typeNameEl.textContent = `${type} Â· ${info.name}`;
  typeDescEl.textContent = `<p>${info.desc}</p>`;
  typeDescEl.innerHTML = `<p>${info.desc}</p>`;
  typeTagsEl.innerHTML = info.tags.map(t=>`<span class="pill">#${t}</span>`).join('');
  matchesEl.innerHTML = info.match.map(t=>`<span class="pill">${t}</span>`).join('');
  renderBars();
  document.getElementById('app').scrollIntoView({behavior:'smooth'});
}

function renderBars(){
  const items = [
    {k:'EI',l:'E',r:'I',v:state.score.EI},
    {k:'SN',l:'S',r:'N',v:state.score.SN},
    {k:'TF',l:'T',r:'F',v:state.score.TF},
    {k:'JP',l:'J',r:'P',v:state.score.JP},
  ];
  barsEl.innerHTML = items.map(it=>{
    const pct = Math.round((it.v+4)/8*100); // -4..+4 -> 0..100 è§†è§‰åŒ–
    return `<div style="margin:8px 0">
      <div class="muted">${it.k}: ${it.l} â†” ${it.r} ï¼ˆ${it.v}ï¼‰</div>
      <div class="progress"><div style="width:${pct}%"></div></div>
    </div>`;
  }).join('');
}

// åˆå§‹æ¸²æŸ“
renderAll();
</script>
</body>
</html>
